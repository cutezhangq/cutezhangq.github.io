<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>è°ˆè°ˆæ·±æ‹·è´ã€æµ…æ‹·è´ | cutezhangq</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://cutezhangq.github.io/favicon.ico?v=1601034681870">
<link rel="stylesheet" href="https://cutezhangq.github.io/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="jså¯¹è±¡ä¸åƒå˜é‡é‚£æ ·ï¼Œç®€å•çš„èµ‹å€¼å°±èƒ½è¿›è¡Œå…‹éš†çš„ï¼Œå¯¹è±¡è¿›è¡Œèµ‹å€¼æ—¶ï¼Œåªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æŒ‡é’ˆæŒ‡å‘ç›¸åŒçš„å­˜å‚¨ç©ºé—´ã€‚ğŸ‘€å¦‚æœä¸æƒ³æ”¹å˜åŸæ•°æ®ï¼Œé‚£ä¹ˆå°±è¦å¯¹å¯¹è±¡è¿›è¡Œæ·±å…‹éš†äº†

var a={a:1}
var b=a;
b.a=2

è¿™æ—¶è¾“å‡ºaä½ ä¼šå‘ç°ï¼Œaçš„..." />
    <meta name="keywords" content="ES" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://cutezhangq.github.io">
        <img src="https://cutezhangq.github.io/images/avatar.png?v=1601034681870" class="site-logo">
        <h1 class="site-title">cutezhangq</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/cutezhangq" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      æ¸©æ•…çŸ¥æ–°
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://cutezhangq.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">è°ˆè°ˆæ·±æ‹·è´ã€æµ…æ‹·è´</h2>
            <div class="post-date">2020-01-07</div>
            
              <div class="feature-container" style="background-image: url('https://cutezhangq.github.io/post-images/tan-tan-shen-kao-bei-qian-kao-bei.jpg')">
              </div>
            
            <div class="post-content" v-pre>
              <p>jså¯¹è±¡ä¸åƒå˜é‡é‚£æ ·ï¼Œç®€å•çš„èµ‹å€¼å°±èƒ½è¿›è¡Œå…‹éš†çš„ï¼Œå¯¹è±¡è¿›è¡Œèµ‹å€¼æ—¶ï¼Œåªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æŒ‡é’ˆæŒ‡å‘ç›¸åŒçš„å­˜å‚¨ç©ºé—´ã€‚ğŸ‘€å¦‚æœä¸æƒ³æ”¹å˜åŸæ•°æ®ï¼Œé‚£ä¹ˆå°±è¦å¯¹å¯¹è±¡è¿›è¡Œæ·±å…‹éš†äº†</p>
<!-- more -->
<pre><code class="language-js">var a={a:1}
var b=a;
b.a=2
</code></pre>
<p>è¿™æ—¶è¾“å‡ºaä½ ä¼šå‘ç°ï¼Œaçš„å€¼åŒæ ·å‘ç”Ÿäº†æ”¹å˜ã€‚<br>
è¿™ä¸€ç‚¹åœ¨ä½ è¿›è¡Œæ•°æ®æ“ä½œæ—¶ï¼Œåˆæƒ³ä¿ç•™åŸæ¥æ•°æ®æ—¶ï¼Œä½ å°±éœ€è¦æ·±åº¦å…‹éš†äº†ã€‚</p>
<h1 id="å¯¹javascriptä¸­çš„5ç§åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œæ·±åº¦å…‹éš†">å¯¹JavaScriptä¸­çš„5ç§åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œæ·±åº¦å…‹éš†</h1>
<ul>
<li>åŸºæœ¬æ•°æ®ç±»å‹çš„å¤åˆ¶å°±æ˜¯æ·±åº¦å…‹éš†<br>
å®ç°ä¸€ä¸ªå‡½æ•°cloneï¼Œå¯ä»¥å¯¹JavaScriptä¸­çš„5ç§ä¸»è¦çš„æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬Numberã€Stringã€Objectã€Arrayã€Booleanï¼‰è¿›è¡Œå€¼å¤åˆ¶</li>
</ul>
<pre><code class="language-js"> function clone(obj){
        var result;
        switch(typeof obj){
            case 'undefined':
            break;
            case 'string':
            result = obj+'';
            break;
            case 'number':
            result = obj-0;
            break;
            case 'boolean':
            result =obj;
            break;
            case 'object':
                if(obj ===null){
                    result = null;
                } else {
                      //è¯¥æ–¹æ³•è¿”å›æè¿°æŸä¸ªå¯¹è±¡æ•°æ®ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œå¦‚è‡ªå®šä¹‰çš„å¯¹è±¡æ²¡æœ‰è¢«è¦†ç›–ï¼Œåˆ™ä¼šè¿”å›â€œ[object type]â€ï¼Œå…¶ä¸­ï¼Œtypeåˆ™æ˜¯å®é™…çš„å¯¹è±¡ç±»å‹ã€‚
                  //åœ¨ä½¿ç”¨è¯¥æ–¹æ³•æ£€æµ‹çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨Object.prototype.toString.call()æˆ–è€…Object.prototype.toString.apply()è¿›è¡Œæµ‹è¯•
                  //slice(startIndex,endIndex)ï¼Œä»0å¼€å§‹ç´¢å¼•ï¼Œå…¶ä¸­8ä»£è¡¨ä»ç¬¬8ä½ï¼ˆåŒ…å«ï¼‰å¼€å§‹æˆªå–ï¼ˆæœ¬ä¾‹ä¸­ä»£è¡¨ç©ºæ ¼åé¢çš„ä½ç½®ï¼‰ï¼Œ-1ä»£è¡¨æˆªå–åˆ°å€’æ•°ç¬¬ä¸€ä½ï¼ˆä¸å«ï¼‰ï¼Œ
                      //æ‰€ä»¥æ­£å¥½æˆªå–åˆ°[object String]ä¸­çš„Stringã€‚
                    if(Object.prototype.toString.call(obj).slice(8,-1)==='Array'){
                        result=[];
                        for(var i=0;i&lt;obj.length;i++){
                            result.push(clone(obj[i]));
                        }
                    }else{
                        result={};
                        for(var k in obj){
                            result[k]=clone(obj[k]);
                            }
                        }
                };
                break;
             default:
                 result = obj;
                 break;
            
        }
        return result
    }


    let a = 'abcdef';
    let b = clone(a);
    console.log((b.concat('ghijk')).slice(4,9));  //efghi
    console.log(a.slice(4,9));  //ef
</code></pre>
<h1 id="æ€ä¹ˆæ·±æ‹·è´ä¸€ä¸ªå¯¹è±¡æ·±æ‹·è´ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™åº”è¯¥æ€ä¹ˆåš">æ€ä¹ˆæ·±æ‹·è´ä¸€ä¸ªå¯¹è±¡ï¼Ÿï¼ˆæ·±æ‹·è´ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™åº”è¯¥æ€ä¹ˆåšï¼Ÿï¼‰</h1>
<p>æ·±åº¦å…‹éš†çš„æ–¹æ³•:</p>
<h2 id="1-jsåºåˆ—åŒ–">1ã€jsåºåˆ—åŒ–</h2>
<ul>
<li>è½¬æ¢æˆjsonå†è½¬æ¢æˆå¯¹è±¡å®ç°å¯¹è±¡çš„æ·±æ‹·è´ï¼ˆå¯¹è±¡é‡Œé¢ä¸åŒ…å«å‡½æ•°çš„æƒ…å†µä¸‹ä½¿ç”¨,æ³¨æ„è¿™ç§ç›´æ¥ç²—æš´çš„æ–¹æ³•åªèƒ½æ‹·è´jsonæ ¼å¼æ•°æ®å¯¹è±¡ï¼Œå‡½æ•°ä¼šä¸¢å¤±ï¼‰</li>
</ul>
<pre><code class="language-js">var obj = {a:1};
var str = JSON.stringify(obj); //åºåˆ—åŒ–å¯¹è±¡         JSON.stringify() æ–¹æ³•å°†ä¸€ä¸ªJavaScript å¯¹è±¡æˆ–å€¼è½¬æ¢ä¸ºJSON å­—ç¬¦ä¸²
var newobj = JSON.parse(str); //è¿˜åŸ
var b = newobj;
b.a = 2;
console.log(obj.a); // 1
console.log(b.a);   // 2 
c.a = 5;
console.log(obj.a); // 1
console.log(b.a);   // 5
</code></pre>
<blockquote>
<p>1.ä»–æ— æ³•å®ç°å¯¹å‡½æ•° ã€RegExpç­‰ç‰¹æ®Šå¯¹è±¡çš„å…‹éš†</p>
</blockquote>
<blockquote>
<p>2.ä¼šæŠ›å¼ƒå¯¹è±¡çš„constructor,æ‰€æœ‰çš„æ„é€ å‡½æ•°ä¼šæŒ‡å‘Object</p>
</blockquote>
<blockquote>
<p>3.å¯¹è±¡æœ‰å¾ªç¯å¼•ç”¨,ä¼šæŠ¥é”™</p>
</blockquote>
<pre><code class="language-js">// æ„é€ å‡½æ•°
function person(pname) {
  this.name = pname;
}

const Messi = new person('Messi');

// å‡½æ•°
function say() {
  console.log('hi');
};

const oldObj = {
  a: say,
  b: new Array(1),
  c: new RegExp('ab+c', 'i'),
  d: Messi
};

const newObj = JSON.parse(JSON.stringify(oldObj));

// æ— æ³•å¤åˆ¶å‡½æ•°
console.log(newObj.a, oldObj.a); // undefined [Function: say]
// ç¨€ç–æ•°ç»„å¤åˆ¶é”™è¯¯
console.log(newObj.b[0], oldObj.b[0]); // null undefined
// æ— æ³•å¤åˆ¶æ­£åˆ™å¯¹è±¡
console.log(newObj.c, oldObj.c); // {} /ab+c/i
// æ„é€ å‡½æ•°æŒ‡å‘é”™è¯¯
console.log(newObj.d.constructor, oldObj.d.constructor); // [Function: Object] [Function: person]

</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨å¯¹å‡½æ•°ã€æ­£åˆ™å¯¹è±¡ã€ç¨€ç–æ•°ç»„ç­‰å¯¹è±¡å…‹éš†æ—¶ä¼šå‘ç”Ÿæ„å¤–ï¼Œæ„é€ å‡½æ•°æŒ‡å‘ä¹Ÿä¼šå‘ç”Ÿé”™è¯¯ã€‚</p>
<pre><code class="language-js">const oldObj = {};

oldObj.a = oldObj;

const newObj = JSON.parse(JSON.stringify(oldObj));
console.log(newObj.a, oldObj.a); // TypeError: Converting circular structure to JSON
</code></pre>
<p>å¯¹è±¡çš„å¾ªç¯å¼•ç”¨ä¼šæŠ›å‡ºé”™è¯¯.</p>
<h1 id="2-è¿›è¡Œå¯¹è±¡çš„éå†å¤åˆ¶">2ã€è¿›è¡Œå¯¹è±¡çš„éå†å¤åˆ¶</h1>
<p>è¿›è¡Œå¯¹è±¡çš„éå†å¤åˆ¶ï¼Œå¯¹å¯¹è±¡çš„æ¯ä¸€æ¡å±æ€§è¿›è¡Œå¤åˆ¶ï¼Œè¿™æ ·å°±èƒ½è¿›è¡Œå¯¹è±¡çš„æ·±åº¦å…‹éš†<br>
å¦‚ä½•å®ç°æ·±æ‹·è´?<br>
æµ…æ‹·è´é‡Œçš„æ•°æ®ä¸èƒ½æœ‰å¯¹è±¡/æ•°ç»„ï¼Œå³ä½¿æœ‰å¯¹è±¡/æ•°ç»„å¯ä»¥ç»§ç»­éå†å¯¹è±¡/æ•°ç»„ï¼Œæ‹¿åˆ°é‡Œé¢çš„æ¯ä¸€é¡¹å€¼ï¼Œ<br>
ä¸€ç›´åˆ°æ‹¿åˆ°çš„æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç„¶åå†å¤åˆ¶ï¼Œè¿™æ—¶å°±æ˜¯æ·±æ‹·è´</p>
<pre><code class="language-js">
function newObj(obj) {
  var str, newobj = obj.constructor === Array ? [] : {};//constructor å±æ€§è¿”å›å¯¹åˆ›å»ºæ­¤å¯¹è±¡çš„æ•°ç»„å‡½æ•°çš„å¼•ç”¨ã€‚åˆ›å»ºç›¸åŒç±»å‹çš„ç©ºæ•°æ®
  if (typeof obj !== 'object') {
    return;
  } else {
    for (var i in obj) {
      if (typeof obj[i] === 'object'){//åˆ¤æ–­å¯¹è±¡çš„è¿™æ¡å±æ€§æ˜¯å¦ä¸ºå¯¹è±¡
        newobj[i] = newObj(obj[i]);//è‹¥æ˜¯å¯¹è±¡è¿›è¡ŒåµŒå¥—è°ƒç”¨
      }else{
        newobj[i] = obj[i];
      }
    }
  }
  return newobj;//è¿”å›æ·±åº¦å…‹éš†åçš„å¯¹è±¡
};
</code></pre>
<pre><code class="language-js">    var obj = {a:1};
    function newObj(obj) {
      var str, newobj = obj.constructor === Array ? [] : {}; //constructor å±æ€§è¿”å›å¯¹åˆ›å»ºæ­¤å¯¹è±¡çš„æ•°ç»„å‡½æ•°çš„å¼•ç”¨ã€‚åˆ›å»ºç›¸åŒç±»å‹çš„ç©ºæ•°æ®
      if (typeof obj !== 'object') {
        return;
      } else {
        for (var i in obj) {
          if (typeof obj[i] === 'object') { //åˆ¤æ–­å¯¹è±¡çš„è¿™æ¡å±æ€§æ˜¯å¦ä¸ºå¯¹è±¡
            newobj[i] = newObj(obj[i]); //è‹¥æ˜¯å¯¹è±¡è¿›è¡ŒåµŒå¥—è°ƒç”¨
          } else {
            newobj[i] = obj[i];
          }
        }
      }
      return newobj; //è¿”å›æ·±åº¦å…‹éš†åçš„å¯¹è±¡
    };

    var b = newObj(obj);
    b.a = 2;
    console.log(obj.a); // 1
    console.log(b.a);   // 2 
</code></pre>
<h1 id="3-åº”ç”¨es6çš„è¯­æ³•å¯¹è±¡å±•å¼€è¿ç®—ç¬¦è¿›è¡Œå¯¹è±¡çš„å±•å¼€èµ‹å€¼">3ã€åº”ç”¨es6çš„è¯­æ³•å¯¹è±¡å±•å¼€è¿ç®—ç¬¦â€”â€”è¿›è¡Œå¯¹è±¡çš„å±•å¼€èµ‹å€¼</h1>
<p>åº”ç”¨es6çš„è¯­æ³•å¯¹è±¡å±•å¼€è¿ç®—ç¬¦ï¼šè¿›è¡Œå¯¹è±¡çš„å±•å¼€èµ‹å€¼</p>
<pre><code class="language-js">var obj = {a:0}
var b = {...obj}
</code></pre>
<pre><code class="language-js">var obj = {a:0}
var b = {...obj}
b.a = 2;
console.log(obj.a); // 0
console.log(b.a);   // 2 
</code></pre>
<p>æˆ–è€…ï¼š</p>
<pre><code class="language-js">const person = [{name: 'Messi'}];
const person1 = person.map(item =&gt;
  ({...item, name: 'Kane'})
)
console.log(person, person1);
// [{name: 'Messi'}] [{name: 'Kane'}]
</code></pre>
<p>çš„ç¡®è¢«æˆåŠŸå¤åˆ¶äº†,ä½†æ˜¯ä¹‹æ‰€ä»¥æˆ‘ä»¬ç§°å®ƒä¸º<code>æµ…å¤åˆ¶</code>,æ˜¯å› ä¸ºè¿™ç§å¤åˆ¶åªèƒ½å¤åˆ¶ä¸€å±‚,åœ¨å¤šå±‚åµŒå¥—çš„æƒ…å†µä¸‹ä¾ç„¶ä¼šå‡ºç°å‰¯ä½œç”¨ã€‚</p>
<pre><code class="language-js">const person = [{name: 'Messi', info: {age: 30}}];
const person1 = person.map(item =&gt;
  ({...item, name: 'Kane'})
)
console.log(person[0].info === person1[0].info); // true
</code></pre>
<p>ä¸Šè¿°ä»£ç è¡¨æ˜å½“åˆ©ç”¨<code>...</code>æµ…å¤åˆ¶äº§ç”Ÿæ–°çš„<code>person1</code>åå…¶ä¸­åµŒå¥—çš„<code>infoå±æ€§</code>ä¾ç„¶ä¸åŸå§‹çš„<code>person</code>çš„<code>infoå±æ€§</code>æŒ‡å‘åŒä¸€ä¸ªå †å†…å­˜å¯¹è±¡,è¿™ç§æƒ…å†µä¾ç„¶ä¼šäº§ç”Ÿå‰¯ä½œç”¨.<br>
æˆ‘ä»¬å¯ä»¥å‘ç°<code>...</code>è™½ç„¶å¯ä»¥è§£å†³æµ…å±‚åµŒå¥—çš„é—®é¢˜,ä½†æ˜¯ä¾ç„¶å¯¹å¤šå±‚åµŒå¥—çš„å¼•ç”¨ç±»å‹æ— èƒ½ä¸ºåŠ›.</p>
<p>åŸºæœ¬æ•°æ®ç±»å‹ï¼šå­˜æ”¾çš„å°±æ˜¯ å®é™…çš„æ•°æ®ï¼Œå¯ç›´æ¥å¤åˆ¶<br>
å…‹éš†æ•°æ®ï¼šå¯¹è±¡/æ•°ç»„</p>
<h1 id="å¦‚ä½•æ·±æ‹·è´ä¸€ä¸ªæ•°ç»„">å¦‚ä½•æ·±æ‹·è´ä¸€ä¸ªæ•°ç»„ï¼Ÿ</h1>
<h2 id="1-for-å¾ªç¯å®ç°æ•°ç»„çš„æ·±æ‹·è´åªé€‚åº”å•å±‚æ•°ç»„ç»“æ„">1ã€for å¾ªç¯å®ç°æ•°ç»„çš„æ·±æ‹·è´(åªé€‚åº”å•å±‚æ•°ç»„ç»“æ„)</h2>
<pre><code class="language-js">var arr = [1,2,3,4,5];//åªé€‚åº”å•å±‚æ•°ç»„ç»“æ„
var arr2 = copyArr(arr)
function copyArr(arr) {
    let res = []
    for (let i = 0; i &lt; arr.length; i++) {
     res.push(arr[i])
    }
    return res
}
arr2[1] = 90;
console.log(arr);   //Â [1, 2, 3, 4, 5]
console.log(arr2);  //Â [1, 90, 3, 4, 5]
</code></pre>
<h2 id="2-concatåªé€‚åº”å•å±‚æ•°ç»„ç»“æ„">2ã€concat(åªé€‚åº”å•å±‚æ•°ç»„ç»“æ„)</h2>
<p>concat() æ–¹æ³•ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ª<strong>æ•°ç»„</strong>ã€‚æ­¤æ–¹æ³•ä¸ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚</p>
<pre><code class="language-js">//concat()    æ·±å¤åˆ¶
  let arr_0 = [1,3,{name:'hhh'}];
  let arr_1 = arr_0.concat();
  arr_1[1] = 6
  console.log(arr_0)  // [1, 3, {name: &quot;hhh&quot;}]
  console.log(arr_1)  // [1, 6, {name: &quot;hhh&quot;}]
</code></pre>
<h2 id="3-slice-æ–¹æ³•å®ç°æ•°ç»„çš„æ·±æ‹·è´åªé€‚åº”å•å±‚æ•°ç»„ç»“æ„">3ã€slice æ–¹æ³•å®ç°æ•°ç»„çš„æ·±æ‹·è´ï¼ˆåªé€‚åº”å•å±‚æ•°ç»„ç»“æ„ï¼‰</h2>
<pre><code class="language-js">var arr = [1,2,3,4,5]; //åªé€‚åº”å•å±‚æ•°ç»„ç»“æ„
var arr2 = arr.slice(0);
arr2[1] = 80;
console.log(arr)   //(5) [1, 2, 5, 4, 5]
console.log(arr2)  //(5) [1, 80, 5, 4, 5]
</code></pre>
<h2 id="4-es6æ‰©å±•è¿ç®—ç¬¦å®ç°æ•°ç»„çš„æ·±æ‹·è´åªé€‚åº”å•å±‚æ•°ç»„ç»“æ„">4ã€ES6æ‰©å±•è¿ç®—ç¬¦å®ç°æ•°ç»„çš„æ·±æ‹·è´ï¼ˆåªé€‚åº”å•å±‚æ•°ç»„ç»“æ„ï¼‰</h2>
<pre><code class="language-js">var arr = [1,2,3,4,5] //åªé€‚åº”å•å±‚æ•°ç»„ç»“æ„
var [ ...arr2 ] = arr
arr2[2] = 50;
console.log(arr)   //(5) [1, 2, 5, 4, 5]
console.log(arr2)  //(5) [1, 2, 50, 4, 5]
</code></pre>
<h1 id="å…¶ä»–æ·±æ‹·è´çš„æ–¹æ³•">å…¶ä»–æ·±æ‹·è´çš„æ–¹æ³•</h1>
<pre><code class="language-js">/**
* deep clone
* @param  {[type]} parent object éœ€è¦è¿›è¡Œå…‹éš†çš„å¯¹è±¡
* @return {[type]}        æ·±å…‹éš†åçš„å¯¹è±¡
*/
const clone = parent =&gt; {
  // ç»´æŠ¤ä¸¤ä¸ªå‚¨å­˜å¾ªç¯å¼•ç”¨çš„æ•°ç»„
  const parents = [];
  const children = [];

  const _clone = parent =&gt; {
    if (parent === null) return null;
    if (typeof parent !== 'object') return parent;

    let child, proto;

    if (isType(parent, 'Array')) {
      // å¯¹æ•°ç»„åšç‰¹æ®Šå¤„ç†
      child = [];
    } else if (isType(parent, 'RegExp')) {
      // å¯¹æ­£åˆ™å¯¹è±¡åšç‰¹æ®Šå¤„ç†
      child = new RegExp(parent.source, getRegExp(parent));
      if (parent.lastIndex) child.lastIndex = parent.lastIndex;
    } else if (isType(parent, 'Date')) {
      // å¯¹Dateå¯¹è±¡åšç‰¹æ®Šå¤„ç†
      child = new Date(parent.getTime());
    } else {
      // å¤„ç†å¯¹è±¡åŸå‹
      proto = Object.getPrototypeOf(parent);
      // åˆ©ç”¨Object.createåˆ‡æ–­åŸå‹é“¾
      child = Object.create(proto);
    }

    // å¤„ç†å¾ªç¯å¼•ç”¨
    const index = parents.indexOf(parent);

    if (index != -1) {
      // å¦‚æœçˆ¶æ•°ç»„å­˜åœ¨æœ¬å¯¹è±¡,è¯´æ˜ä¹‹å‰å·²ç»è¢«å¼•ç”¨è¿‡,ç›´æ¥è¿”å›æ­¤å¯¹è±¡
      return children[index];
    }
    parents.push(parent);
    children.push(child);

    for (let i in parent) {
      // é€’å½’
      child[i] = _clone(parent[i]);
    }

    return child;
  };
  return _clone(parent);
};
</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="language-js">function person(pname) {
  this.name = pname;
}

const Messi = new person('Messi');

function say() {
  console.log('hi');
}

const oldObj = {
  a: say,
  c: new RegExp('ab+c', 'i'),
  d: Messi,
};

oldObj.b = oldObj;


const newObj = clone(oldObj);
console.log(newObj.a, oldObj.a); // [Function: say] [Function: say]
console.log(newObj.b, oldObj.b); // { a: [Function: say], c: /ab+c/i, d: person { name: 'Messi' }, b: [Circular] } { a: [Function: say], c: /ab+c/i, d: person { name: 'Messi' }, b: [Circular] }
console.log(newObj.c, oldObj.c); // /ab+c/i /ab+c/i
console.log(newObj.d.constructor, oldObj.d.constructor); // [Function: person] [Function: person]

</code></pre>
<p>å½“ç„¶,æˆ‘ä»¬è¿™ä¸ªæ·±å…‹éš†è¿˜ä¸ç®—å®Œç¾,ä¾‹å¦‚Bufferå¯¹è±¡ã€Promiseã€Setã€Mapå¯èƒ½éƒ½éœ€è¦æˆ‘ä»¬åšç‰¹æ®Šå¤„ç†ï¼Œå¦å¤–å¯¹äºç¡®ä¿æ²¡æœ‰å¾ªç¯å¼•ç”¨çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥çœå»å¯¹å¾ªç¯å¼•ç”¨çš„ç‰¹æ®Šå¤„ç†ï¼Œå› ä¸ºè¿™å¾ˆæ¶ˆè€—æ—¶é—´ï¼Œä¸è¿‡ä¸€ä¸ªåŸºæœ¬çš„æ·±å…‹éš†å‡½æ•°æˆ‘ä»¬å·²ç»å®ç°äº†ã€‚</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>å®ç°ä¸€ä¸ªå®Œæ•´çš„æ·±å…‹éš†æ˜¯ç”±è®¸å¤šå‘è¦è¸©çš„,npmä¸Šä¸€äº›åº“çš„å®ç°ä¹Ÿä¸å¤Ÿå®Œæ•´,åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æœ€å¥½ç”¨lodashçš„æ·±å…‹éš†å®ç°.</p>
<h1 id="æµ…æ‹·è´æ·±æ‹·è´-åŒºåˆ«">æµ…æ‹·è´/æ·±æ‹·è´ åŒºåˆ«ï¼š</h1>
<ul>
<li>æ‹·è´ äº§ç”Ÿäº†æ–°çš„æ•°æ®     ï¼šæ·±æ‹·è´</li>
<li>æ‹·è´ æ•°æ®çš„å¼•ç”¨    ï¼šæµ…æ‹·è´</li>
</ul>
<h1 id="æµ…æ‹·è´å¯¹è±¡æ•°ç»„ç‰¹ç‚¹">æµ…æ‹·è´ï¼ˆå¯¹è±¡/æ•°ç»„ï¼‰ï¼šç‰¹ç‚¹ï¼š</h1>
<ul>
<li>æ‹·è´çš„å¼•ç”¨ï¼Œ</li>
<li>ä¿®æ”¹æ‹·è´åçš„æ•°æ®ä¼šå½±å“åŸæ•°æ®</li>
</ul>
<h1 id="æ·±æ‹·è´ç‰¹ç‚¹">æ·±æ‹·è´ï¼šç‰¹ç‚¹ï¼š</h1>
<ul>
<li>ç”Ÿæˆæ–°æ•°æ®ï¼Œ</li>
<li>ä¸å½±å“åŸæ•°æ®</li>
</ul>
<h1 id="å¸¸ç”¨çš„æ‹·è´æŠ€æœ¯">å¸¸ç”¨çš„æ‹·è´æŠ€æœ¯</h1>
<h3 id="æµ…æ‹·è´">æµ…æ‹·è´</h3>
<ul>
<li>Object.assign()</li>
</ul>
<pre><code class="language-js">// Object.assign();  æµ…å¤åˆ¶
//Object.assign() æ–¹æ³•ç”¨äºå°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚å®ƒå°†è¿”å›ç›®æ ‡å¯¹è±¡ã€‚Object.assign(target, source);
  let obj = {username: 'kobe', age: 39, sex: {option1: 'å¥³', option2: 'å¥³'}};
  let obj2 = obj;
  Object.assign(obj2, obj);  
  console.log(obj2);    //   {username: 'kobe', age: 39, sex: {option1: 'ç”·', option2: 'å¥³'}}
  obj2.sex.option1 = 'ç”·';                    
  console.log(obj);     //   {username: 'kobe', age: 39, sex: {option1: 'ç”·', option2: 'å¥³'}}   
  console.log(obj2);    //  {username: 'kobe', age: 39, sex: {option1: 'ç”·', option2: 'å¥³'}}
</code></pre>
<p><code>Object.assign()</code>æ–¹æ³•ç”¨äºå°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚å®ƒå°†è¿”å›ç›®æ ‡å¯¹è±¡ã€‚</p>
<pre><code class="language-js">const target = { a: 1, b: 2 };
const source = { b: 4, c: 5 };

const returnedTarget = Object.assign(target, source);

console.log(target);
// expected output: Object { a: 1, b: 4, c: 5 }

console.log(returnedTarget);
// expected output: Object { a: 1, b: 4, c: 5 }
</code></pre>
<p>target</p>
<blockquote>
<p>ç›®æ ‡å¯¹è±¡ã€‚</p>
</blockquote>
<p>sources</p>
<blockquote>
<p>æºå¯¹è±¡ã€‚</p>
</blockquote>
<ul>
<li>æ˜¯æµ…æ‹·è´ï¼š<br>
å¦‚æœç›®æ ‡å¯¹è±¡ä¸­çš„å±æ€§å…·æœ‰ç›¸åŒçš„é”®ï¼Œåˆ™å±æ€§å°†è¢«æºå¯¹è±¡ä¸­çš„å±æ€§è¦†ç›–ã€‚åé¢çš„æºå¯¹è±¡çš„å±æ€§å°†ç±»ä¼¼åœ°è¦†ç›–å‰é¢çš„æºå¯¹è±¡çš„å±æ€§ã€‚</li>
</ul>
<p><code>æ³¨æ„ï¼ŒObject.assign ä¸ä¼šåœ¨é‚£äº›sourceå¯¹è±¡å€¼ä¸º null æˆ– undefined çš„æ—¶å€™æŠ›å‡ºé”™è¯¯ã€‚</code></p>
<h3 id="æ·±æ‹·è´">æ·±æ‹·è´</h3>
<p>å…·ä½“è§ä¸Šé¢<br>
æ³¨æ„ï¼šå½“<code>ä¸æ­¢ä¸€å±‚</code>æ—¶ï¼Œconcatã€sliceã€es6ä¸‰ç‚¹è¿ç®—ç¬¦ï¼Œå°±æ˜¯æµ…æ‹·è´äº†ã€‚</p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://cutezhangq.github.io/tag/_vij4ft88/" class="tag">
                    ES
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://cutezhangq.github.io/post/nei-cun-yi-chu-yu-nei-cun-xie-lou/">
                  <h3 class="post-title">
                    å†…å­˜æº¢å‡ºä¸å†…å­˜æ³„æ¼
                  </h3>
                </a>
              </div>
            

            
              
                <div id="gitalk-container" data-aos="fade-in"></div>
              

              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>




  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '',
        clientSecret: '',
        repo: '',
        owner: '',
        admin: [''],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>

<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>é¢è¯•100é—® | cutezhangq</title>
<link rel="shortcut icon" href="https://cutezhangq.github.io/favicon.ico?v=1592291572276">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cutezhangq.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="é¢è¯•100é—® | cutezhangq - Atom Feed" href="https://cutezhangq.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="ç¬¬ 1 é¢˜ï¼šï¼ˆæ»´æ»´ã€é¥¿äº†ä¹ˆï¼‰å†™ React / Vue é¡¹ç›®æ—¶ä¸ºä»€ä¹ˆè¦åœ¨åˆ—è¡¨ç»„ä»¶ä¸­å†™ keyï¼Œå…¶ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ
ğŸ˜…emm..å¯¹è¿™ä¸ªé—®é¢˜æœ‰è¿‡ç–‘é—®ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰æ¢å¯»åŸå› ï¼Œç°åœ¨æ¢³ç†ä¸€ä¸‹
ç­”æ¡ˆ
é¦–å…ˆåœ¨vueå¾ªç¯éå†ç”ŸæˆèŠ‚ç‚¹ä¸­ä¼šä½¿ç”¨åˆ°keyï¼Œé‚£ä¹ˆåˆ°åº•..." />
    <meta name="keywords" content="é¢è¯•" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://cutezhangq.github.io">
  <img class="avatar" src="https://cutezhangq.github.io/images/avatar.png?v=1592291572276" alt="">
  </a>
  <h1 class="site-title">
    cutezhangq
  </h1>
  <p class="site-description">
    æ¸©æ•…çŸ¥æ–°
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              é¢è¯•100é—®
            </h2>
            <div class="post-info">
              <span>
                2020-04-01
              </span>
              <span>
                6 min read
              </span>
              
                <a href="https://cutezhangq.github.io/tag/gEYVGztSN/" class="post-tag">
                  # é¢è¯•
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <h1 id="ç¬¬-1-é¢˜æ»´æ»´-é¥¿äº†ä¹ˆå†™-react-vue-é¡¹ç›®æ—¶ä¸ºä»€ä¹ˆè¦åœ¨åˆ—è¡¨ç»„ä»¶ä¸­å†™-keyå…¶ä½œç”¨æ˜¯ä»€ä¹ˆ">ç¬¬ 1 é¢˜ï¼šï¼ˆæ»´æ»´ã€é¥¿äº†ä¹ˆï¼‰å†™ React / Vue é¡¹ç›®æ—¶ä¸ºä»€ä¹ˆè¦åœ¨åˆ—è¡¨ç»„ä»¶ä¸­å†™ keyï¼Œå…¶ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h1>
<p>ğŸ˜…emm..å¯¹è¿™ä¸ªé—®é¢˜æœ‰è¿‡ç–‘é—®ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰æ¢å¯»åŸå› ï¼Œç°åœ¨æ¢³ç†ä¸€ä¸‹</p>
<h2 id="ç­”æ¡ˆ"><strong>ç­”æ¡ˆ</strong></h2>
<p>é¦–å…ˆåœ¨vueå¾ªç¯éå†ç”ŸæˆèŠ‚ç‚¹ä¸­ä¼šä½¿ç”¨åˆ°keyï¼Œé‚£ä¹ˆåˆ°åº•è¦ä¸è¦ä½¿ç”¨keyï¼Œå‚è€ƒå®˜ç½‘ä¸Šçš„æè¿°ï¼š<br>
ğŸ“ƒVUEæ–‡æ¡£:</p>
<ul>
<li>å»ºè®®å°½å¯èƒ½åœ¨ä½¿ç”¨ v-for æ—¶æä¾› key attributeï¼Œé™¤ééå†è¾“å‡ºçš„ DOM å†…å®¹éå¸¸ç®€å•ï¼Œæˆ–è€…æ˜¯åˆ»æ„ä¾èµ–é»˜è®¤è¡Œä¸ºä»¥è·å–æ€§èƒ½ä¸Šçš„æå‡ã€‚</li>
</ul>
<p>å¾—å‡ºç»“è®ºï¼Œå¤šæ•°æƒ…å†µæœ€å¥½ä½¿ç”¨key!</p>
<pre><code class="language-html">&lt;div id=&quot;app&quot;&gt;
    &lt;div v-for=&quot;i in dataList&quot; :key=&quot;i&quot;&gt;{{ i }}&lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>keyæ˜¯ç”¨æ¥<code>ç»‘å®š</code>è™šæ‹ŸèŠ‚ç‚¹çš„ï¼Œç»™æ¯ä¸€ä¸ªvnode<code>å”¯ä¸€</code>idã€‚<br>
å½“ä¸ä½¿ç”¨keyçš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥é€šè¿‡v-forå®ç°ä»¥ä¸‹çš„domèŠ‚ç‚¹æ•°ç»„<br>
ğŸŒ° æ¡ˆä¾‹ï¼š</p>
<pre><code class="language-js">var vm = new Vue({
  el: '#app',
  data: {
    dataList: [1, 2, 3, 4, 5]
  }
})
</code></pre>
<p>ä¸ºäº†æ–¹ä¾¿ï¼Œæ ‡è®°ä¸ŠidåŠ ä»¥è¯´æ˜èŠ‚ç‚¹ã€‚å½“æ•°ç»„ä¸º[1, 2, 3, 4, 5]æ—¶ï¼ŒåŠ keyä¸ä¸åŠ keyéƒ½å¦‚ä¸‹ï¼š</p>
<pre><code class="language-html"> [
    '&lt;div&gt;1&lt;/div&gt;',     // id:  A
    '&lt;div&gt;2&lt;/div&gt;',     // id:  B
    '&lt;div&gt;3&lt;/div&gt;',     // id:  C
    '&lt;div&gt;4&lt;/div&gt;',     // id:  D
    '&lt;div&gt;5&lt;/div&gt;'      // id:  E
  ]
</code></pre>
<p>ä½†æ˜¯ï¼Œå½“æ•°ç»„æœ‰å˜åŒ–æ—¶ï¼Œä¸¤è€…å°±æœ‰åŒºåˆ«äº†ã€‚<br>
æ”¹å˜dataListæ•°æ®ï¼Œè¿›è¡Œæ•°æ®ä½ç½®æ›¿æ¢ï¼Œå¯¹æ¯”æ”¹å˜åçš„æ•°æ®å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js"> vm.dataList = [4, 1, 3, 5, 2] // æ•°æ®ä½ç½®æ›¿æ¢
 // æ²¡æœ‰keyçš„æƒ…å†µï¼Œ èŠ‚ç‚¹ä½ç½®ä¸å˜ï¼Œä½†æ˜¯èŠ‚ç‚¹innerTextå†…å®¹æ›´æ–°äº†
  [
    '&lt;div&gt;4&lt;/div&gt;', // idï¼š A
    '&lt;div&gt;1&lt;/div&gt;', // id:  B
    '&lt;div&gt;3&lt;/div&gt;', // id:  C
    '&lt;div&gt;5&lt;/div&gt;', // id:  D
    '&lt;div&gt;2&lt;/div&gt;'  // id:  E
  ]

  // æœ‰keyçš„æƒ…å†µï¼ŒdomèŠ‚ç‚¹ä½ç½®è¿›è¡Œäº†äº¤æ¢ï¼Œä½†æ˜¯å†…å®¹æ²¡æœ‰æ›´æ–°
  // &lt;div v-for=&quot;i in dataList&quot; :key='i'&gt;{{ i }}&lt;/div&gt;
  [
    '&lt;div&gt;4&lt;/div&gt;', // idï¼š D
    '&lt;div&gt;1&lt;/div&gt;', // id:  A
    '&lt;div&gt;3&lt;/div&gt;', // id:  C
    '&lt;div&gt;5&lt;/div&gt;', // id:  E
    '&lt;div&gt;2&lt;/div&gt;'  // id:  B
  ]
</code></pre>
<p>åŸå› ï¼š<code>æ²¡æœ‰ç»‘å®škeyçš„æƒ…å†µä¸‹ï¼ŒèŠ‚ç‚¹ä¼šè¿›è¡Œå¤ç”¨</code>ï¼Œå³å‘ˆç°å‡ºidæ²¡å˜ï¼Œå†…å®¹å˜åŒ–äº†ï¼ˆ<code>å°±åœ°æ›´æ–°</code>ï¼‰ï¼Œè¿™æ ·<code>æœ‰åˆ©äºdiffé€Ÿåº¦</code>ï¼Œä½†æ˜¯è¿™ç§æ¨¡å¼ä¼šå¸¦æ¥ä¸€äº›éšè—çš„å‰¯ä½œç”¨ã€‚å¯èƒ½ä¸ä¼šäº§ç”Ÿè¿‡æ¸¡çš„æ•ˆæœï¼ŒæŸäº›èŠ‚ç‚¹ç»‘å®šæ•°æ®ï¼ˆè¡¨å•ï¼‰çŠ¶æ€æ—¶ï¼Œä¼šå‡ºç°çŠ¶æ€é”™ä½ã€‚æ²¡åŠæ³•è¿½è¸ªåˆ°æ¯ä¸ªèŠ‚ç‚¹ã€‚<br>
ä½¿ç”¨keyå¯ä»¥ï¼š</p>
<ul>
<li>å®Œæ•´åœ°è§¦å‘ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­</li>
<li>è§¦å‘è¿‡æ¸¡</li>
</ul>
<pre><code class="language-html">&lt;transition&gt;
  &lt;span :key=&quot;text&quot;&gt;{{ text }}&lt;/span&gt;
&lt;/transition&gt;
</code></pre>
<p>å½“ text å‘ç”Ÿæ”¹å˜æ—¶ï¼Œspanæ€»æ˜¯ä¼šè¢«æ›¿æ¢è€Œä¸æ˜¯è¢«ä¿®æ”¹ï¼Œå› æ­¤ä¼šè§¦å‘è¿‡æ¸¡ã€‚</p>
<p>ğŸ“ƒVUEæ–‡æ¡£ä¹Ÿè¯´æ˜äº†</p>
<ul>
<li>ä¸åŠ keyæ—¶ï¼Œ<a href="https://cn.vuejs.org/v2/guide/list.html#%E7%BB%B4%E6%8A%A4%E7%8A%B6%E6%80%81">è¿™ä¸ªé»˜è®¤çš„æ¨¡å¼æ˜¯é«˜æ•ˆçš„ï¼Œä½†æ˜¯åªé€‚ç”¨äºä¸ä¾èµ–å­ç»„ä»¶çŠ¶æ€æˆ–ä¸´æ—¶ DOM çŠ¶æ€ (ä¾‹å¦‚ï¼šè¡¨å•è¾“å…¥å€¼) çš„åˆ—è¡¨æ¸²æŸ“è¾“å‡º</a></li>
</ul>
<p>å¢åˆ dataListåˆ—è¡¨é¡¹ï¼Œå¯¹æ¯”æ”¹å˜åçš„æ•°æ®å¦‚ä¸‹ï¼š</p>
<pre><code class="language-html">vm.dataList = [3, 4, 5, 6, 7] // æ•°æ®è¿›è¡Œå¢åˆ 
  // 1. æ²¡æœ‰keyçš„æƒ…å†µï¼Œ èŠ‚ç‚¹ä½ç½®ä¸å˜ï¼Œå†…å®¹ä¹Ÿæ›´æ–°äº†
  [
    '&lt;div&gt;3&lt;/div&gt;', // idï¼š A
    '&lt;div&gt;4&lt;/div&gt;', // id:  B
    '&lt;div&gt;5&lt;/div&gt;', // id:  C
    '&lt;div&gt;6&lt;/div&gt;', // id:  D
    '&lt;div&gt;7&lt;/div&gt;'  // id:  E
  ]

  // 2. æœ‰keyçš„æƒ…å†µï¼Œ èŠ‚ç‚¹åˆ é™¤äº† A, B èŠ‚ç‚¹ï¼Œæ–°å¢äº† F, G èŠ‚ç‚¹
  // &lt;div v-for=&quot;i in dataList&quot; :key='i'&gt;{{ i }}&lt;/div&gt;
  [
    '&lt;div&gt;3&lt;/div&gt;', // idï¼š C
    '&lt;div&gt;4&lt;/div&gt;', // id:  D
    '&lt;div&gt;5&lt;/div&gt;', // id:  E
    '&lt;div&gt;6&lt;/div&gt;', // id:  F
    '&lt;div&gt;7&lt;/div&gt;'  // id:  G
  ]
</code></pre>
<p>keyæ˜¯ç»™æ¯ä¸€ä¸ªvnodeçš„å”¯ä¸€id,å¯ä»¥ä¾é key,<code>æ›´å‡†ç¡®</code>, <code>æ›´å¿«</code>çš„æ‹¿åˆ°oldVnodeä¸­å¯¹åº”çš„vnodeèŠ‚ç‚¹ã€‚<br>
æ›´å¿« ä½“ç°åœ¨ï¼šåˆ©ç”¨keyçš„å”¯ä¸€æ€§ç”Ÿæˆmapå¯¹è±¡æ¥è·å–å¯¹åº”èŠ‚ç‚¹ï¼Œæ¯”éå†æ–¹å¼æ›´å¿«ã€‚(è¿™ä¸ªè§‚ç‚¹ï¼Œå°±æ˜¯æˆ‘æœ€åˆçš„é‚£ä¸ªè§‚ç‚¹ã€‚ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œmapä¼šæ¯”éå†æ›´å¿«ã€‚</p>
<h2 id="æ‰©å±•"><strong>æ‰©å±•</strong>ï¼š</h2>
<h3 id="diffç®—æ³•">diffç®—æ³•</h3>
<h3 id="vueæºç ">vueæºç </h3>
<h1 id="ç¬¬-2-é¢˜1-2-3mapparseint-what-why">ç¬¬ 2 é¢˜ï¼š['1', '2', '3'].map(parseInt) what &amp; why ?</h1>
<p>emm..mapæ˜¯es6ä¸­æ¶‰åŠåˆ°çš„æ–¹æ³•ï¼Œæ˜¯æŒ‡ä¸é‡å¤çš„Key-valueå½¢å¼çš„æ•°æ®ï¼ŒparseIntæ˜¯....è¿”å›æ•´æ•°çš„ï¼Œç„¶å¹¶åµ...orzğŸ¤’</p>
<h2 id="ç­”æ¡ˆ-2"><strong>ç­”æ¡ˆ</strong></h2>
<p>çœŸæ­£çš„ç­”æ¡ˆæ˜¯[1, NaN, NaN]<br>
è¿™é¢˜çš„ä¸»è¦è€ƒå¯Ÿï¼Œè¿˜æ˜¯arr.mapï¼ˆï¼‰æ–¹æ³•ï¼Œå’ŒparseIntï¼Œå¯¹å®ƒä»¬ä¸€å®šè¦æ·±å…¥ç†è§£ã€‚ä¸‹é¢é™„ä¸ŠMDNå®˜æ–¹è§£é‡Šï¼š<br>
ğŸ“ƒMDNï¼š</p>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map">Array.prototype.map()</a></li>
</ul>
<pre><code class="language-js">    var new_array = arr.map(function callback(currentValue[, index[, array]]) {     }[, thisArg])
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://cutezhangq.github.io/post-images/1585987454821.png" alt="" width="400" height="300" loading="lazy"></figure>
<h3 id="mapæ–¹æ³•å®šä¹‰">mapæ–¹æ³•å®šä¹‰</h3>
<p>å°†æ•°ç»„ä¸­çš„å€¼æŒ‰é¡ºåºè°ƒç”¨callbackå‡½æ•°ï¼Œç„¶åç”±callbackè¿”å›çš„æ•°æŒ‰é¡ºåºç»„æˆæ–°æ•°ç»„ï¼›æ²¡æœ‰èµ‹å€¼æˆ–åˆ é™¤æ‰çš„ç´¢å¼•ä¸ä¼šè°ƒç”¨ã€‚</p>
<h3 id="mapæ–¹æ³•ä½¿ç”¨">mapæ–¹æ³•ä½¿ç”¨</h3>
<p>mapæ–¹æ³•é’ˆå¯¹<code>æ–°æ•°ç»„</code>çš„ï¼Œ<code>ä¸ä¼šä¿®æ”¹åŸæ•°ç»„</code>ï¼Œè‹¥æ˜¯å¯¹åŸæ•°ç»„è¿›è¡Œæ“ä½œåˆ™ä½¿ç”¨for-ofæˆ–forEachã€‚<br>
callback å‡½æ•°ä¼šè¢«è‡ªåŠ¨ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼š<code>æ•°ç»„å…ƒç´ </code>ï¼Œ<code>å…ƒç´ ç´¢å¼•</code>ï¼Œ<code>åŸæ•°ç»„æœ¬èº«</code>ã€‚</p>
<p>ğŸ™„å…¶å®è¿™é‡Œä¸»è¦éš¾åº¦æ˜¯parseIntï¼Œä¸‹é¢ä¸€èµ·æ¥ç ”ç©¶ä¸‹å­~<br>
ğŸ“ƒMDNï¼š</p>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/parseInt">parseInt</a></li>
</ul>
<pre><code class="language-js">parseInt(string, radix);
</code></pre>
<p>å°†ä¸€ä¸ªå­—ç¬¦ä¸² string è½¬æ¢ä¸º radix è¿›åˆ¶çš„æ•´æ•°ï¼Œ radix ä¸ºä»‹äº2-36ä¹‹é—´çš„æ•°ã€‚</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#%E7%AC%AC-1-%E9%A2%98%E6%BB%B4%E6%BB%B4-%E9%A5%BF%E4%BA%86%E4%B9%88%E5%86%99-react-vue-%E9%A1%B9%E7%9B%AE%E6%97%B6%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%9C%A8%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6%E4%B8%AD%E5%86%99-key%E5%85%B6%E4%BD%9C%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88">ç¬¬ 1 é¢˜ï¼šï¼ˆæ»´æ»´ã€é¥¿äº†ä¹ˆï¼‰å†™ React / Vue é¡¹ç›®æ—¶ä¸ºä»€ä¹ˆè¦åœ¨åˆ—è¡¨ç»„ä»¶ä¸­å†™ keyï¼Œå…¶ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</a>
<ul>
<li><a href="#%E7%AD%94%E6%A1%88"><strong>ç­”æ¡ˆ</strong></a></li>
<li><a href="#%E6%89%A9%E5%B1%95"><strong>æ‰©å±•</strong>ï¼š</a>
<ul>
<li><a href="#diff%E7%AE%97%E6%B3%95">diffç®—æ³•</a></li>
<li><a href="#vue%E6%BA%90%E7%A0%81">vueæºç </a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E7%AC%AC-2-%E9%A2%981-2-3mapparseint-what-why">ç¬¬ 2 é¢˜ï¼š['1', '2', '3'].map(parseInt) what &amp; why ?</a>
<ul>
<li><a href="#%E7%AD%94%E6%A1%88-2"><strong>ç­”æ¡ˆ</strong></a>
<ul>
<li><a href="#map%E6%96%B9%E6%B3%95%E5%AE%9A%E4%B9%89">mapæ–¹æ³•å®šä¹‰</a></li>
<li><a href="#map%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8">mapæ–¹æ³•ä½¿ç”¨</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://cutezhangq.github.io/post/git/">
              <h3 class="post-title">
                Git
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://cutezhangq.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>

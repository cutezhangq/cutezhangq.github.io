<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>数据通信方案、组件间传值 | cutezhangq</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://cutezhangq.github.io/favicon.ico?v=1597108174842">
<link rel="stylesheet" href="https://cutezhangq.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="组件间的通信方式有多种~，一起来看下吧，最全攻略哦！👉
在讲述通信方式之前，我们先了解下组件间通信的特点💁

组件间通信的特点
👉1. 不要在子组件中直接修改父组件的状态数据
👉2. 数据在哪, 更新数据的行为(函数)就应该定义在哪..." />
    <meta name="keywords" content="" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://cutezhangq.github.io">
        <img src="https://cutezhangq.github.io/images/avatar.png?v=1597108174842" class="site-logo">
        <h1 class="site-title">cutezhangq</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/cutezhangq" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      温故知新
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://cutezhangq.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">数据通信方案、组件间传值</h2>
            <div class="post-date">2020-08-06</div>
            
              <div class="feature-container" style="background-image: url('https://cutezhangq.github.io/post-images/shu-ju-tong-xin-fang-an-zu-jian-jian-chuan-zhi.jpg')">
              </div>
            
            <div class="post-content" v-pre>
              <p>组件间的通信方式有多种~，一起来看下吧，最全攻略哦！👉<br>
在讲述通信方式之前，我们先了解下组件间通信的特点💁</p>
<!-- more -->
<h1 id="组件间通信的特点">组件间通信的特点</h1>
<p>👉1. 不要在子组件中直接修改父组件的状态数据<br>
👉2. 数据在哪, 更新数据的行为(函数)就应该定义在哪</p>
<h1 id="vue-组件数据通信方案总结">Vue 组件数据通信方案总结</h1>
<p><img src="https://cutezhangq.github.io/post-images/1596720130251.png" alt="" loading="lazy"><br>
组件 A 与组件 B 、C 之间是父子组件，组件 B 、C 之间是兄弟组件，而组件 A 、D 之间是隔代的关系。<br>
那么对于这些不同的关系，本文主要分享了他们之间可以采用的几种数据通信方式，<br>
例如 Props 、$emit / $on 、Vuex 等，大家可以根据自己的使用场景可以选择适合的使用方式。</p>
<h1 id="一-prop-emit-父子-子父">一、 Prop / $emit    （父——&gt;子        子——&gt;父）</h1>
<h2 id="prop-通过绑定属性的方式">Prop  通过绑定属性的方式</h2>
<pre><code class="language-html">// 父组件   &lt;child :title=&quot;title1&quot;&gt;&lt;/child&gt;
// 子组件   props: { title:Object }
</code></pre>
<p>其中，props的用法：<br>
props 是<strong>单向绑定</strong>的：当父组件的属性变化时，将传导给子组件，但是不会反过来。这是为了防止子组件无意修改父组件的状态。<br>
所以<code>不应该在子组件中修改 props 中的值，Vue 会报出警告</code>。</p>
<h2 id="修改-props-数据">修改 props 数据</h2>
<p>通常有两种原因：</p>
<ul>
<li>prop 作为初始值传入后，子组件想把它当做局部数据来用</li>
<li>prop 作为初始值传入后，由子组件处理成其他数据输出</li>
</ul>
<h2 id="应对办法是">应对办法是</h2>
<ul>
<li>定义一个<code>局部变量</code>，并用 prop 的值初始化它<br>
但是由于定义的 ownChildMsg 只能接受 forChildMsg <code>的初始值</code>，当父组件要传递的值变化发生时，ownChildMsg <code>无法收到更新</code>。</li>
</ul>
<pre><code class="language-js">let childNode = {
  template: `
          &lt;div class=&quot;child&quot;&gt;
            &lt;div&gt;
              &lt;span&gt;子组件数据&lt;/span&gt;
              &lt;input v-model=&quot;forChildMsg&quot;/&gt;
            &lt;/div&gt;
            &lt;p&gt;{{forChildMsg}}&lt;/p&gt;
            &lt;p&gt;ownChildMsg : {{ownChildMsg}}&lt;/p&gt;
          &lt;/div&gt;`,
  props: {
    &quot;for-child-msg&quot;: String
  },
  data() {
    return { ownChildMsg: this.forChildMsg };
  }
};
</code></pre>
<p>这里我们加了一个<p>用于查看 ownChildMsg 数据是否变化，结果发现只有默认值传递给了 ownChildMsg，父组件改变只会变化到 forChildMsg，不会修改 ownChildMsg。</p>
<ul>
<li>定义一个<code>计算属性</code>，处理 prop 的值并返回<br>
由于是计算属性，所以只能显示值，不能设置值。我们这里设置的是一旦从父组件修改了 forChildMsg 数据，我们就把 forChildMsg 加上一个字符串&quot;---ownChildMsg&quot;，然后显示在屏幕上。这时是可以每当父组件修改了新数据，<code>都会更新</code> ownChildMsg 数据的。</li>
</ul>
<pre><code class="language-js">let childNode = {
  template: `
          &lt;div class=&quot;child&quot;&gt;
            &lt;div&gt;
              &lt;span&gt;子组件数据&lt;/span&gt;
              &lt;input v-model=&quot;forChildMsg&quot;/&gt;
            &lt;/div&gt;
            &lt;p&gt;{{forChildMsg}}&lt;/p&gt;
            &lt;p&gt;ownChildMsg : {{ownChildMsg}}&lt;/p&gt;
          &lt;/div&gt;`,
  props: {
    &quot;for-child-msg&quot;: String
  },
  computed: {
    ownChildMsg() {
      return this.forChildMsg + &quot;---ownChildMsg&quot;;
    }
  }
};
</code></pre>
<ul>
<li>更加妥帖的方式是<code>使用变量存储</code> prop 的初始值，并用<code>watch</code>来观察 prop 值得<code>变化</code>。发生变化时，更新变量的值。</li>
</ul>
<pre><code class="language-js">let childNode = {
  template: `
          &lt;div class=&quot;child&quot;&gt;
            &lt;div&gt;
              &lt;span&gt;子组件数据&lt;/span&gt;
              &lt;input v-model=&quot;forChildMsg&quot;/&gt;
            &lt;/div&gt;
            &lt;p&gt;{{forChildMsg}}&lt;/p&gt;
            &lt;p&gt;ownChildMsg : {{ownChildMsg}}&lt;/p&gt;
          &lt;/div&gt;`,
  props: {
    &quot;for-child-msg&quot;: String
  },
  data() {
    return {
      ownChildMsg: this.forChildMsg
    };
  },
  watch: {
    forChildMsg() {
      this.ownChildMsg = this.forChildMsg;
    }
  }
};
</code></pre>
<!-- more -->
<!-- more -->
<h2 id="emit-子组件向父组件传值通过事件形式所以是v-on也就是符号">$emit 子组件向父组件传值（通过事件形式,所以是v-on也就是@符号）</h2>
<pre><code class="language-html">// 父组件    @xxx=&quot;zzz&quot;    methods:{zzz(q){ this.qq = q }}    //q就是接收到的子组件值
// 子组件   this.$emit('xxx',yyy);    //yyy是值
</code></pre>
<p>子组件通过 $emit 事件向父组件发送消息，将自己的数据传递给父组件。<br>
应用：搜索框 ，在searchTab（子组件）中将用户输入的搜索内容传到search（父组件）中</p>
<p><strong>$emit 传递一个参数</strong><br>
子组件：</p>
<pre><code class="language-js">this.$emit('closeChange',false);
</code></pre>
<p>父组件：</p>
<pre><code class="language-js">&lt;posilCom @closeChange=&quot;closeCom($event)&quot;&gt;&lt;/posilCom&gt;
closeCom(msg) {
  this.msg = msg;
}
</code></pre>
<p><strong>$emit传递多个参数</strong><br>
子组件：</p>
<pre><code class="language-js">this.$emit('closeChange',false,true);
</code></pre>
<p>父组件：</p>
<pre><code class="language-js">&lt;posilCom @closeChange=&quot;closeCom(arguments)&quot;&gt;&lt;/posilCom&gt;
closeCom(msg) {
  this.msg1 = msg[0];
  this.msg2 = msg[1];
}
</code></pre>
<!-- more -->
<h1 id="二-emit-on-事件总线bus或者叫eventbus-适用于-父子-隔代-兄弟组件通信">二、 <code>$emit / $on</code>    事件总线：$bus或者叫EventBus     适用于 父子、隔代、兄弟组件通信</h1>
<h2 id="写法一将bus总线挂载到原型上用的时候直接thisbus即可使用发送-接收">写法一：将<code>$bus</code>总线挂载到原型上，用的时候直接this.$bus即可使用（发送、接收）</h2>
<pre><code class="language-js">写法一：
main.js
    Vue.prototype.$bus = new Vue()
发送：
    this.$bus.$emit('事件名称',参数)
接收
    this.$bus.$on('事件名称'，function(参数){
    })
</code></pre>
<p>Vue中的 事件总线：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>u</mi><mi>s</mi><mi mathvariant="normal">或</mi><mi mathvariant="normal">者</mi><mi mathvariant="normal">叫</mi><mi>E</mi><mi>v</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>B</mi><mi>u</mi><mi>s</mi><mi mathvariant="normal">—</mi><mi mathvariant="normal">—</mi><mi mathvariant="normal">通</mi><mi mathvariant="normal">过</mi><mi mathvariant="normal">事</mi><mi mathvariant="normal">件</mi><mi mathvariant="normal">总</mi><mi mathvariant="normal">线</mi><mi mathvariant="normal">获</mi><mi mathvariant="normal">取</mi><mi mathvariant="normal">到</mi><mi mathvariant="normal">非</mi><mi mathvariant="normal">父</mi><mi mathvariant="normal">子</mi><mi mathvariant="normal">组</mi><mi mathvariant="normal">件</mi><mi mathvariant="normal">通</mi><mi mathvariant="normal">信</mi><mi mathvariant="normal">，</mi><mi mathvariant="normal">适</mi><mi mathvariant="normal">用</mi><mi mathvariant="normal">于</mi><mi mathvariant="normal">父</mi><mi mathvariant="normal">子</mi><mi mathvariant="normal">、</mi><mi mathvariant="normal">隔</mi><mi mathvariant="normal">代</mi><mi mathvariant="normal">、</mi><mi mathvariant="normal">兄</mi><mi mathvariant="normal">弟</mi><mi mathvariant="normal">组</mi><mi mathvariant="normal">件</mi><mi mathvariant="normal">通</mi><mi mathvariant="normal">信</mi><mi mathvariant="normal">。</mi><mi mathvariant="normal">这</mi><mi mathvariant="normal">个</mi><mi mathvariant="normal">方</mi><mi mathvariant="normal">法</mi><mi mathvariant="normal">是</mi><mi mathvariant="normal">通</mi><mi mathvariant="normal">过</mi><mi mathvariant="normal">‘</mi><mi mathvariant="normal">创</mi><mi mathvariant="normal">建</mi><mi mathvariant="normal">了</mi><mi mathvariant="normal">一</mi><mi mathvariant="normal">个</mi><mi mathvariant="normal">空</mi><mi mathvariant="normal">的</mi><mi>v</mi><mi>u</mi><mi>e</mi><mi mathvariant="normal">实</mi><mi mathvariant="normal">例</mi><mi mathvariant="normal">‘</mi><mi mathvariant="normal">，</mi><mi mathvariant="normal">当</mi><mi mathvariant="normal">做</mi><mi mathvariant="normal">‘</mi></mrow><annotation encoding="application/x-tex">bus或者叫EventBus    —— 通过事件总线获取到非父子组件通信， 适用于 父子、隔代、兄弟组件通信。
这个方法是通过`创建了一个空的 vue 实例`，当做 `</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mord cjk_fallback">或</span><span class="mord cjk_fallback">者</span><span class="mord cjk_fallback">叫</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mord" style="margin-right:0.02778em;">—</span><span class="mord" style="margin-right:0.02778em;">—</span><span class="mord cjk_fallback">通</span><span class="mord cjk_fallback">过</span><span class="mord cjk_fallback">事</span><span class="mord cjk_fallback">件</span><span class="mord cjk_fallback">总</span><span class="mord cjk_fallback">线</span><span class="mord cjk_fallback">获</span><span class="mord cjk_fallback">取</span><span class="mord cjk_fallback">到</span><span class="mord cjk_fallback">非</span><span class="mord cjk_fallback">父</span><span class="mord cjk_fallback">子</span><span class="mord cjk_fallback">组</span><span class="mord cjk_fallback">件</span><span class="mord cjk_fallback">通</span><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">适</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">于</span><span class="mord cjk_fallback">父</span><span class="mord cjk_fallback">子</span><span class="mord cjk_fallback">、</span><span class="mord cjk_fallback">隔</span><span class="mord cjk_fallback">代</span><span class="mord cjk_fallback">、</span><span class="mord cjk_fallback">兄</span><span class="mord cjk_fallback">弟</span><span class="mord cjk_fallback">组</span><span class="mord cjk_fallback">件</span><span class="mord cjk_fallback">通</span><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">。</span><span class="mord cjk_fallback">这</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">方</span><span class="mord cjk_fallback">法</span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">通</span><span class="mord cjk_fallback">过</span><span class="mord">‘</span><span class="mord cjk_fallback">创</span><span class="mord cjk_fallback">建</span><span class="mord cjk_fallback">了</span><span class="mord cjk_fallback">一</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">空</span><span class="mord cjk_fallback">的</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">u</span><span class="mord mathdefault">e</span><span class="mord cjk_fallback">实</span><span class="mord cjk_fallback">例</span><span class="mord">‘</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">当</span><span class="mord cjk_fallback">做</span><span class="mord">‘</span></span></span></span>emit 事件的处理中心（事件总线）`，通过他来触发以及监听事件。</p>
<h2 id="写法二将事件总线event创建在父组件中通过父子组件传值的方式props将事件event传给子组件123并在子组件123中通过-thisevent使用">写法二：将事件总线Event创建在父组件中，通过父子组件传值的方式（props）将事件Event传给子组件123，并在子组件123中通过 this.Event使用。</h2>
<pre><code class="language-js">写法二：
//父组件中：
 事件总线：
     const Event = new Vue();
        data(){
            return{ 
                Event:Event 
                }
            }
 //子组件们:   
:Evnet=&quot;Event&quot;
</code></pre>
<pre><code class="language-js">//子组件1   将事件总线传到组件1中
props: {
        Event:Object
  },
    this.Event.$emit(&quot;xxx&quot;,this.name)   //    this.Event.$emit传值
</code></pre>
<pre><code class="language-js">//子组件2   将事件总线传到组件2中
props: {
    Event:Object
  },
    this.Event.$emit(&quot;yyy&quot;,this.age)    //    this.Event.$emit传值
</code></pre>
<pre><code class="language-js">//子组件3  将事件总线传到组件3中
  props: {
    Event:Object
  },
this.Event.$on(&quot;xxx&quot;,name=&gt;{    //this.Event.$on取值
    this.name = name 
})
this.Event.$on(&quot;yyy&quot;,age=&gt;{     //this.Event.$on取值
    this.age= age
})
</code></pre>
<!-- more -->
<h1 id="三-vuex">三、vuex</h1>
<p>应用：购物车（购物车中的数据信息是要被多个组件共享的）<br>
Vuex状态管理模式。<br>
它采用集中式存储 管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。<br>
Vuex 实现了一个<strong>单项数据流</strong>。 每一个 Vuex 应用的核心就是 store（仓库）。<br>
“store” 基本上就是一个容器，它包含着你的应用中大部分的状态 ( state )。</p>
<ul>
<li>Vuex 的状态存储是<strong>响应式的</strong>。当 Vue 组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会相应地得到<code>高效更新</code>。</li>
<li>改变 store 中的状态的<code>唯一</code>途径就是显式地提交 (commit) mutation。这样使得我们可以方便地跟踪每一个状态的变化。</li>
</ul>
<pre><code class="language-js">// store
import Vue from 'vue';
import Vuex from 'vuex';

Vue.use(Vuex);

const store = new Vuex.Store({      //组件中数据状态存储管理的容器
state: {                    //3. 读取数据状态
    count: 1
},
mutations: {            //2. 修改status状态——唯一可进行修改的，是同步的
    increment(state) {
        state.count++;
    },
    reduce(state) {
        state.count--;
    }
},
actions: {                  //1. 提交数据给mutations,是异步的
    actIncrement({ commit }) {
        commit('increment');
    },
    actReduce({ commit }) {
        commit('reduce');
    }
},
getters: {               //4 读取数据，并对数据进行计算，最终读取数据
doubleCount: state =&gt; state.count*2
}
});

export default store;
</code></pre>
<pre><code class="language-html">// vue文件
&lt;template&gt;
&lt;div class=&quot;container&quot;&gt;
&lt;p&gt;我的count：{{count}}&lt;/p&gt;
&lt;p&gt;doubleCount:{{doubleCount}}&lt;/p&gt;
&lt;button @click=&quot;this.actIncrement&quot;&gt;增加&lt;/button&gt;
&lt;button @click=&quot;this.actReduce&quot;&gt;减少&lt;/button&gt;
&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<pre><code class="language-js">import { mapGetters, mapActions, mapState } from &quot;vuex&quot;;

export default {
name: &quot;demo&quot;,
data: function() {
    return {};
},
components: {},
props: {},
computed: {
    ...mapState([&quot;count&quot;]),
    ...mapGetters([&quot;doubleCount&quot;])
},
methods: {
    ...mapActions([&quot;actIncrement&quot;, &quot;actReduce&quot;])
}
};
</code></pre>
<p><img src="https://cutezhangq.github.io/post-images/1596764710488.png" alt="" loading="lazy"><br>
mapxxx是<code>辅助函数</code>，将方法<code>映射</code>过来<br>
如：mapMutations ，将组件中的 methods 映射为 store.commit 调用</p>
<pre><code class="language-js">methods:{
 ...mapMutations(['addAge'])
}
</code></pre>
<p>mapMutations(['addAge'])这一句就相当于下面的代码</p>
<pre><code class="language-js">addAge(payLoad){
  this.$store.commit('addAge',payLoad)
}
</code></pre>
<!-- more -->
<h1 id="四-attrs-listeners-适用于-隔代组件通信">四、$attrs / $listeners    （ 适用于 隔代组件通信）</h1>
<ul>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>t</mi><mi>t</mi><mi>r</mi><mi>s</mi><mi mathvariant="normal">：</mi><mi mathvariant="normal">包</mi><mi mathvariant="normal">含</mi><mi mathvariant="normal">了</mi><mi mathvariant="normal">父</mi><mi mathvariant="normal">作</mi><mi mathvariant="normal">用</mi><mi mathvariant="normal">域</mi><mi mathvariant="normal">中</mi><mi mathvariant="normal">不</mi><mi mathvariant="normal">作</mi><mi mathvariant="normal">为</mi><mi>P</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi mathvariant="normal">被</mi><mi mathvariant="normal">识</mi><mi mathvariant="normal">别</mi><mo>(</mo><mi mathvariant="normal">且</mi><mi mathvariant="normal">获</mi><mi mathvariant="normal">取</mi><mo>)</mo><mi mathvariant="normal">的</mi><mi mathvariant="normal">特</mi><mi mathvariant="normal">性</mi><mi mathvariant="normal">绑</mi><mi mathvariant="normal">定</mi><mo>(</mo><mi>C</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mi mathvariant="normal">和</mi><mi>S</mi><mi>t</mi><mi>y</mi><mi>l</mi><mi>e</mi><mi mathvariant="normal">除</mi><mi mathvariant="normal">外</mi><mi mathvariant="normal">。</mi><mi mathvariant="normal">当</mi><mi mathvariant="normal">一</mi><mi mathvariant="normal">个</mi><mi mathvariant="normal">组</mi><mi mathvariant="normal">件</mi><mi mathvariant="normal">没</mi><mi mathvariant="normal">有</mi><mi mathvariant="normal">声</mi><mi mathvariant="normal">明</mi><mi mathvariant="normal">任</mi><mi mathvariant="normal">何</mi><mi>P</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi mathvariant="normal">时</mi><mi mathvariant="normal">，</mi><mi mathvariant="normal">这</mi><mi mathvariant="normal">里</mi><mi mathvariant="normal">会</mi><mi mathvariant="normal">包</mi><mi mathvariant="normal">含</mi><mi mathvariant="normal">所</mi><mi mathvariant="normal">有</mi><mi mathvariant="normal">父</mi><mi mathvariant="normal">作</mi><mi mathvariant="normal">用</mi><mi mathvariant="normal">域</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">绑</mi><mi mathvariant="normal">定</mi><mo>(</mo><mi>C</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mi mathvariant="normal">和</mi><mi>S</mi><mi>t</mi><mi>y</mi><mi>l</mi><mi>e</mi><mi mathvariant="normal">除</mi><mi mathvariant="normal">外</mi><mo>)</mo><mi mathvariant="normal">，</mi><mi mathvariant="normal">并</mi><mi mathvariant="normal">且</mi><mi mathvariant="normal">可</mi><mi mathvariant="normal">以</mi><mi mathvariant="normal">通</mi><mi mathvariant="normal">过</mi><mi>v</mi><mo>−</mo><mi>b</mi><mi>i</mi><mi>n</mi><mi>d</mi><mo>=</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">attrs： 包含了父作用域中不作为 Prop 被识别 (且获取) 的特性绑定(Class 和  Style 除外。
当一个组件没有声明任何 Prop 时，这里会包含所有父作用域的绑定 (Class 和 Style 除外)，并且可以通过 v-bind=&quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord cjk_fallback">：</span><span class="mord cjk_fallback">包</span><span class="mord cjk_fallback">含</span><span class="mord cjk_fallback">了</span><span class="mord cjk_fallback">父</span><span class="mord cjk_fallback">作</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">域</span><span class="mord cjk_fallback">中</span><span class="mord cjk_fallback">不</span><span class="mord cjk_fallback">作</span><span class="mord cjk_fallback">为</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault">p</span><span class="mord cjk_fallback">被</span><span class="mord cjk_fallback">识</span><span class="mord cjk_fallback">别</span><span class="mopen">(</span><span class="mord cjk_fallback">且</span><span class="mord cjk_fallback">获</span><span class="mord cjk_fallback">取</span><span class="mclose">)</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">特</span><span class="mord cjk_fallback">性</span><span class="mord cjk_fallback">绑</span><span class="mord cjk_fallback">定</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mord cjk_fallback">和</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord cjk_fallback">除</span><span class="mord cjk_fallback">外</span><span class="mord cjk_fallback">。</span><span class="mord cjk_fallback">当</span><span class="mord cjk_fallback">一</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">组</span><span class="mord cjk_fallback">件</span><span class="mord cjk_fallback">没</span><span class="mord cjk_fallback">有</span><span class="mord cjk_fallback">声</span><span class="mord cjk_fallback">明</span><span class="mord cjk_fallback">任</span><span class="mord cjk_fallback">何</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault">p</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">这</span><span class="mord cjk_fallback">里</span><span class="mord cjk_fallback">会</span><span class="mord cjk_fallback">包</span><span class="mord cjk_fallback">含</span><span class="mord cjk_fallback">所</span><span class="mord cjk_fallback">有</span><span class="mord cjk_fallback">父</span><span class="mord cjk_fallback">作</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">域</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">绑</span><span class="mord cjk_fallback">定</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">s</span><span class="mord cjk_fallback">和</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord cjk_fallback">除</span><span class="mord cjk_fallback">外</span><span class="mclose">)</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">并</span><span class="mord cjk_fallback">且</span><span class="mord cjk_fallback">可</span><span class="mord cjk_fallback">以</span><span class="mord cjk_fallback">通</span><span class="mord cjk_fallback">过</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">&quot;</span></span></span></span>attrs&quot; 传入内部组件——在创建高级别的组件时非常有用。</p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi mathvariant="normal">：</mi><mi mathvariant="normal">包</mi><mi mathvariant="normal">含</mi><mi mathvariant="normal">了</mi><mi mathvariant="normal">父</mi><mi mathvariant="normal">作</mi><mi mathvariant="normal">用</mi><mi mathvariant="normal">域</mi><mi mathvariant="normal">中</mi><mi mathvariant="normal">的</mi><mo>(</mo><mi mathvariant="normal">不</mi><mi mathvariant="normal">含</mi><mi mathvariant="normal">.</mi><mi>n</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>e</mi><mi mathvariant="normal">修</mi><mi mathvariant="normal">饰</mi><mi mathvariant="normal">器</mi><mi mathvariant="normal">的</mi><mo>)</mo><mi>v</mi><mo>−</mo><mi>o</mi><mi>n</mi><mi mathvariant="normal">事</mi><mi mathvariant="normal">件</mi><mi mathvariant="normal">监</mi><mi mathvariant="normal">听</mi><mi mathvariant="normal">器</mi><mi mathvariant="normal">。</mi><mi mathvariant="normal">它</mi><mi mathvariant="normal">可</mi><mi mathvariant="normal">以</mi><mi mathvariant="normal">通</mi><mi mathvariant="normal">过</mi><mi>v</mi><mo>−</mo><mi>o</mi><mi>n</mi><mo>=</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">listeners： 包含了父作用域中的 (不含 .native 修饰器的) v-on 事件监听器。
它可以通过 v-on=&quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord cjk_fallback">：</span><span class="mord cjk_fallback">包</span><span class="mord cjk_fallback">含</span><span class="mord cjk_fallback">了</span><span class="mord cjk_fallback">父</span><span class="mord cjk_fallback">作</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">域</span><span class="mord cjk_fallback">中</span><span class="mord cjk_fallback">的</span><span class="mopen">(</span><span class="mord cjk_fallback">不</span><span class="mord cjk_fallback">含</span><span class="mord">.</span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">e</span><span class="mord cjk_fallback">修</span><span class="mord cjk_fallback">饰</span><span class="mord cjk_fallback">器</span><span class="mord cjk_fallback">的</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord cjk_fallback">事</span><span class="mord cjk_fallback">件</span><span class="mord cjk_fallback">监</span><span class="mord cjk_fallback">听</span><span class="mord cjk_fallback">器</span><span class="mord cjk_fallback">。</span><span class="mord cjk_fallback">它</span><span class="mord cjk_fallback">可</span><span class="mord cjk_fallback">以</span><span class="mord cjk_fallback">通</span><span class="mord cjk_fallback">过</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">&quot;</span></span></span></span>listeners&quot; 传入内部组件<br>
<img src="https://cutezhangq.github.io/post-images/1596765958655.png" alt="" loading="lazy"><br>
父组件:</p>
</li>
</ul>
<pre><code class="language-html">// 父组件
&lt;template&gt;
    &lt;div class=&quot;container&quot;&gt;
        &lt;button style=&quot;backgroundColor:lightgray&quot; @click=&quot;reduce&quot;&gt;减dd&lt;/button&gt;
        &lt;child1 :aa=&quot;aa&quot; :bb=&quot;bb&quot; :cc=&quot;cc&quot; :dd=&quot;dd&quot; @reduce=&quot;reduce&quot;&gt;&lt;/child1&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Child1 from './component/child1.vue';
export default {
    name: 'demo',
    data: function() {
        return {
            aa: 1,
            bb: 2,
            cc: 3,
            dd: 100
    };
},
components: {
    Child1
},
methods: {
    reduce() {
        this.dd--;
    }
}
};
&lt;/script&gt;
</code></pre>
<p>// 子组件1 &quot; v-on=&quot;$listeners”    $attrs</p>
<pre><code class="language-html">// 子组件1
&lt;template&gt;
&lt;div&gt;
&lt;div class=&quot;center&quot;&gt;
&lt;p&gt;aa:{{aa}}&lt;/p&gt;
&lt;p&gt;child1的$attrs:{{$attrs}}&lt;/p&gt;
&lt;button @click=&quot;this.reduce1&quot;&gt;组件1减dd&lt;/button&gt;
&lt;/div&gt;
&lt;child2 v-bind=&quot;$attrs&quot; v-on=&quot;$listeners&quot;&gt;&lt;/child2&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import child2 from './child2.vue';
export default {
name: 'demo1',
data() {
return {};
},
props: {
aa: Number
},
components: {
child2
},
methods: {
reduce1() {
this.$emit('reduce');
}
}
};
&lt;/script&gt;
</code></pre>
<p>//子组件2 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>t</mi><mi>t</mi><mi>r</mi><mi>s</mi><mi>v</mi><mo>−</mo><mi>b</mi><mi>i</mi><mi>n</mi><mi>d</mi><mo>=</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">attrs   v-bind=&quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69841em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">&quot;</span></span></span></span>attrs&quot;</p>
<pre><code class="language-html">// 子组件2
&lt;template&gt;
&lt;div&gt;
&lt;div class=&quot;center&quot;&gt;
&lt;p&gt;bb:{{bb}}&lt;/p&gt;
&lt;p&gt;child2的$attrs:{{$attrs}}&lt;/p&gt;
&lt;button @click=&quot;this.reduce2&quot;&gt;组件2减dd&lt;/button&gt;
&lt;/div&gt;
&lt;child3 v-bind=&quot;$attrs&quot;&gt;&lt;/child3&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import child3 from './child3.vue';
export default {
name: 'demo1',
data() {
return {};
},
props: {
bb: Number
},
components: {
child3
},
methods: {
reduce2() {
this.$emit('reduce');
}
}
};
&lt;/script&gt;
</code></pre>
<p>//子组件3    $attrs</p>
<pre><code class="language-html">// 子组件3
&lt;template&gt;
&lt;div class=&quot;center&quot;&gt;
&lt;p&gt;child3的$attrs:{{$attrs}}&lt;/p&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
name: 'demo3',
data() {
return {};
},
props: {
dd: String
},
};
&lt;/script&gt;
</code></pre>
<p>简单来说，<code>$attrs 里存放的是父组件中绑定的非 props 属性，$listeners 里面存放的是父组件中绑定的非原生事件。</code></p>
<h1 id="五-provide-inject-适用于-隔代组件通信">五、Provide / Inject     适用于 隔代组件通信</h1>
<p>Vue 2.2 版本以后新增了这两个 API ，<br>
这对选项需要<strong>一起使用</strong>，以允许<code>一个祖先</code>组件向其<code>所有子孙后代</code> 注入一个依赖，不论组件层次有多深，并在其上下游关系成立的时间里<strong>始终生效</strong>。</p>
<ul>
<li>就是父组件通过 Provide 传入变量，任意子孙组件通过 Inject 来拿到变量。</li>
</ul>
<p>它的使用场景，主要是子组件获取上级组件的状态，跨级组件间建立了一种主动提供与依赖注入的关系。<br>
需要注意的是： Provide 和 Inject 绑定并<code>不是可响应的</code>。这是刻意为之的。然而，如果你<code>传入了一个可监听的对象</code>，那么其对象的属性还是<code>可响应</code>的。<br>
所以，如果采用的是代码中注释的方式，父级的 name 如果改变了，子组件this.name 是不会改变的，仍然是 zxx ，而当采用代码中传入一个监听对象，修改对象中属性值，是可以监听到修改的。<br>
Provider / Inject 在项目中需要有较多公共传参时使用还是颇为方便的。</p>
<ul>
<li>小总结：传输数据父级一次注入，子孙组件一起共享的方式。</li>
</ul>
<p>//Provide<br>
data: function() {<br>
return {<br>
name: 'zxx'<br>
};<br>
},<br>
provide() {<br>
return {<br>
obj: this    //响应式的方式<br>
};<br>
},</p>
<pre><code class="language-html">// 父组件
&lt;template&gt;
&lt;div class=&quot;container&quot;&gt;
&lt;button @click=&quot;this.changeName&quot;&gt;我要改名字了&lt;/button&gt;
&lt;p&gt;我的名字：{{name}}&lt;/p&gt;
&lt;child1&gt;&lt;/child1&gt;
&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<pre><code class="language-js">
import Child1 from './component/child1.vue';
export default {
name: 'demo',
data: function() {
return {
name: 'zxx'
};
},
// provide() {
// return {
// name: this.name //这种绑定方式是不可响应的
// };
// },
provide() {
return {
obj: this
};
},
components: {
Child1
},
methods: {
changeName() {
this.name = '政采云前端';
}
}
};

</code></pre>
<p>//Inject<br>
inject: {<br>
obj: {<br>
default: () =&gt; {<br>
return {};<br>
}<br>
}<br>
},<br>
this.obj.name</p>
<pre><code class="language-html">// 子组件
&lt;template&gt;
&lt;div&gt;
&lt;div class=&quot;center&quot;&gt;
&lt;!-- &lt;p&gt;子组件名字:{{name}}&lt;/p&gt; --&gt;
&lt;p&gt;子组件名字:{{this.obj.name}}&lt;/p&gt;
&lt;/div&gt;
&lt;child2&gt;&lt;/child2&gt;
&lt;/div&gt;
&lt;/template&gt;
</code></pre>
<pre><code class="language-js">import child2 from './child2.vue';

export default {
name: 'demo1',
data() {
return {};
},
props: {},
// inject: [&quot;name&quot;],
inject: {
obj: {
default: () =&gt; {
return {};
}
}
},
components: {
child2
},
};
</code></pre>
<h1 id="六-parent-children-refs-父子组件间通信">六、$parent / $children &amp; $refs               父子组件间通信</h1>
<ul>
<li>
<p><code>$parent / $children</code>： 指定已创建的实例之父实例，在两者之间建立父子关系。子实例可以用 <code>this.$parent</code>访问父实例，子实例被推入父实例的<code>$children</code>数组中。</p>
</li>
<li>
<p><code>$refs</code>： 一个对象，持有注册过 ref  的所有 DOM 元素和组件实例。ref 被用来给元素或子组件注册引用信息。引用信息将会注册在父组件的 <code>$refs</code>对象上。<br>
如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素；如果用在子组件上，引用就指向组件。</p>
</li>
</ul>
<blockquote>
<p>// 父组件<br>
<child1 ref="comp1"></child1><br>
<child2 ref="comp2"></child2></p>
</blockquote>
<pre><code>data: function() {
return {
    title: null,
    name: null,
    content: '就是我'
    };
},

const comp1 = this.$refs.comp1;
this.title = comp1.title;
this.$children[1].title
</code></pre>
<pre><code class="language-html">// 父组件
&lt;template&gt;
&lt;div class=&quot;container&quot;&gt;
&lt;p&gt;我的title：{{title}}&lt;/p&gt;
&lt;p&gt;我的name：{{name}}&lt;/p&gt;
&lt;child1 ref=&quot;comp1&quot;&gt;&lt;/child1&gt;
&lt;child2 ref=&quot;comp2&quot;&gt;&lt;/child2&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Child1 from './component/child1.vue';
import Child2 from './component/child2.vue';
export default {
name: 'demo',
data: function() {
return {
title: null,
name: null,
content: '就是我'
};
},
components: {
Child1,
Child2
},
mounted() {
const comp1 = this.$refs.comp1;
this.title = comp1.title;
comp1.sayHello();
this.name = this.$children[1].title;
},
};
&lt;/script&gt;
</code></pre>
<blockquote>
<p>// 子组件1-ref方式<br>
// 子组件1-ref方式<br>
this.$parent.content</p>
</blockquote>
<pre><code class="language-html">// 子组件1-ref方式
&lt;template&gt;
&lt;div&gt;
&lt;div class=&quot;center&quot;&gt;我的父组件是谁:{{content}}&lt;/div&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
name: 'demo1',
data() {
return {
title: '我是子组件',
content: null
};
},
mounted() {
this.content = this.$parent.content;
},
methods: {
sayHello() {
window.alert('Hello');
}
}
};
&lt;/script&gt;
</code></pre>
<p>// 子组件2-children方式</p>
<pre><code class="language-html">// 子组件2-children方式
&lt;template&gt;
&lt;div&gt;
&lt;div class=&quot;center&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default{
name: 'demo1',
data() {
return {
title: '我是子组件2'
};
},
};
&lt;/script&gt;
</code></pre>
<p>通过例子可以看到这两种方式都可以父子间通信，而缺点也很统一，就是都不能跨级以及兄弟间通信。<br>
小总结：父子组件间共享数据以及方法的便捷实践之一。<br>
👉如果子组件是公共组件，会被多个父组件调用，那么$parent会怎么获取？<br>
👉改变他们的属性将会怎么变化？<br>
👉父组件中没有这个属性怎么办？</p>
<pre><code>1. 针对不同父组件调用，子组件会每次都会生成一个实例，这也是Vue的重要机制。$parent会获取每个调用它的父组件实例。
2. 子组件中通过$parent会改变每个调用它的父组件中的对应属性。
</code></pre>
<!-- more -->
<h1 id="总结">总结</h1>
<p>组件间不同的使用场景可以分为 3 类，对应的通信方式如下：</p>
<p>• 父子通信：Props / <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>e</mi><mi>m</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">，</mi></mrow><annotation encoding="application/x-tex">emit，</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord cjk_fallback">，</span></span></span></span>emit / <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>o</mi><mi>n</mi><mi mathvariant="normal">即</mi><mi>B</mi><mi>u</mi><mi>s</mi><mi mathvariant="normal">事</mi><mi mathvariant="normal">件</mi><mi mathvariant="normal">总</mi><mi mathvariant="normal">线</mi><mi mathvariant="normal">方</mi><mi mathvariant="normal">式</mi><mi mathvariant="normal">，</mi><mi>V</mi><mi>u</mi><mi>e</mi><mi>x</mi><mi mathvariant="normal">，</mi></mrow><annotation encoding="application/x-tex">on即Bus事件总线方式，Vuex，</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord cjk_fallback">即</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mord cjk_fallback">事</span><span class="mord cjk_fallback">件</span><span class="mord cjk_fallback">总</span><span class="mord cjk_fallback">线</span><span class="mord cjk_fallback">方</span><span class="mord cjk_fallback">式</span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord mathdefault">u</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord cjk_fallback">，</span></span></span></span>attrs / <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi mathvariant="normal">，</mi><mi>p</mi><mi>r</mi><mi>o</mi><mi>v</mi><mi>i</mi><mi>d</mi><mi>e</mi><mi mathvariant="normal">/</mi><mi>i</mi><mi>n</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi mathvariant="normal">，</mi></mrow><annotation encoding="application/x-tex">listeners，provide/inject，</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord cjk_fallback">，</span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord">/</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord cjk_fallback">，</span></span></span></span>parent / <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>h</mi><mi>i</mi><mi>l</mi><mi>d</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi mathvariant="normal">＆</mi></mrow><annotation encoding="application/x-tex">children＆</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">h</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord cjk_fallback">＆</span></span></span></span>refs</p>
<p>• 兄弟通信：$emit / $on即Bus事件总线方式，Vuex</p>
<p>• 隔代（跨级）通信：$emit / <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>o</mi><mi>n</mi><mi mathvariant="normal">即</mi><mi>B</mi><mi>u</mi><mi>s</mi><mi mathvariant="normal">事</mi><mi mathvariant="normal">件</mi><mi mathvariant="normal">总</mi><mi mathvariant="normal">线</mi><mi mathvariant="normal">方</mi><mi mathvariant="normal">式</mi><mi mathvariant="normal">，</mi><mi>V</mi><mi>u</mi><mi>e</mi><mi>x</mi><mi mathvariant="normal">，</mi><mi>p</mi><mi>r</mi><mi>o</mi><mi>v</mi><mi>i</mi><mi>d</mi><mi>e</mi><mi mathvariant="normal">/</mi><mi>i</mi><mi>n</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi mathvariant="normal">，</mi></mrow><annotation encoding="application/x-tex">on即Bus事件总线方式，Vuex，provide / inject，</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord cjk_fallback">即</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mord cjk_fallback">事</span><span class="mord cjk_fallback">件</span><span class="mord cjk_fallback">总</span><span class="mord cjk_fallback">线</span><span class="mord cjk_fallback">方</span><span class="mord cjk_fallback">式</span><span class="mord cjk_fallback">，</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord mathdefault">u</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord cjk_fallback">，</span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord">/</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord cjk_fallback">，</span></span></span></span>attrs / $listeners</p>
<!-- more -->
<h1 id="七-消息订阅与发布-任意组件间的信息传递">七、消息订阅与发布        任意组件间的信息传递</h1>
<p>详情见相关文章<br>
安装pubsub-js</p>
<pre><code class="language-cmd"> npm install pubsub-js --save
</code></pre>
<p>优点：<code>可以进行任意组件间的信息传递。</code></p>
<p>1、发布消息</p>
<pre><code class="language-js">    PubSub.publish('msg', data)
</code></pre>
<p>下面的例子中，msg为‘type’ , data为communicateType<br>
<img src="https://cutezhangq.github.io/post-images/1596769897505.png" alt="" loading="lazy"></p>
<p>2、订阅消息</p>
<pre><code class="language-js">    PubSub.subscribe('msg', function(msg, data){})
</code></pre>
<p>第一个msg为‘type’ （必须与发布消息中的msg一样才能实现通信）,第二个msg就是与第一个msg一样，第二个msg必须得有（语法规定的）<br>
<img src="https://cutezhangq.github.io/post-images/1596769944793.png" alt="" loading="lazy"></p>
<!-- more -->
<h1 id="八-slot">八、slot</h1>
<p>详情见相关文章</p>

            </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://cutezhangq.github.io/post/new-yun-suan-fu-de-zhi-xing-guo-cheng/">
                  <h3 class="post-title">
                     new运算符的执行过程
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>





  </body>
</html>
